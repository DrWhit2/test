@charset "utf-8";
@import url(//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css);

:root{
  --wood:#0f0e0d; --ink:#2b1c0f; --shadow:0 30px 80px rgba(0,0,0,.55);
  --tab-yellow:#ffef8f; --tab-green:#bfe5b7; --tab-pink:#ffd1d8; --tab-blue:#cfe1ff;
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; color:var(--ink); font-family:ui-serif,"Noto Serif KR",serif;
  background:
    radial-gradient(1200px 700px at 65% -10%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(1000px 800px at 30% 120%, rgba(255,255,255,.05), transparent 60%),
    var(--wood);
}

/* ===== Book ===== */
.book{
  position:relative; width:min(1100px,94vw); height:min(720px,76vh);
  margin:16px auto; border-radius:18px; perspective:2200px;
  background:linear-gradient(180deg,#1b140e 0,#0e0c0a 100%);
  border:1px solid #493320; box-shadow:var(--shadow); overflow:visible;
}
.book::after{ /* 전체 노이즈 */
  content:""; position:absolute; inset:0; border-radius:18px; pointer-events:none;
  background-image:url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120">\
<filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".9" numOctaves="2"/>\
<feComponentTransfer><feFuncA type="table" tableValues="0 .07"/></feComponentTransfer></filter>\
<rect width="120" height="120" fill="rgba(255,255,255,.08)" filter="url(%23n)"/></svg>');
  mix-blend-mode:overlay; opacity:.35;
}

/* Spine */
.spine{ position:absolute; left:50%; top:26px; bottom:26px; width:22px; transform:translateX(-11px);
  background:linear-gradient(90deg,#1d140d,#372515,#1d140d); border:1px solid #4a3320; border-left:none; border-right:none;
  box-shadow:inset 0 0 30px rgba(0,0,0,.5); z-index:3; overflow:hidden;
}
.stitches{ position:absolute; inset:18px 0; background:
  radial-gradient(4px 8px at 50% 8%, #d7c19a 40%, transparent 45%) repeat-y,
  radial-gradient(4px 8px at 50% 92%, #d7c19a 40%, transparent 45%) repeat-y;
  background-size:100% 52px,100% 52px; background-position:0 0,0 26px; opacity:.8; width:100%;
}
.spine .grain{ position:absolute; inset:0; pointer-events:none; background-image:url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><filter id="gn"><feTurbulence type="fractalNoise" baseFrequency=".8" numOctaves="2"/><feColorMatrix type="saturate" values=".1"/></filter><rect width="120" height="120" fill="rgba(255,255,255,.03)" filter="url(%23gn)"/></svg>');
  mix-blend-mode:overlay; opacity:.6;
}

/* ===== Stack of leaves ===== */
.stack{ position:absolute; inset:26px; }

/* 한 장(leaf) = 오른쪽 앞면(even), 왼쪽 뒷면(odd) */
.leaf{
  position:absolute; left:50%; top:0; bottom:0; width:calc(50% - 26px - 14px);
  transform:translateX(14px) rotateY(0deg);
  transform-origin:left center; transform-style:preserve-3d;
  transition:transform .9s cubic-bezier(.17,.67,.32,.98), filter .4s ease;
  z-index:var(--z,5); cursor:pointer; user-select:none;
}
.leaf.turned{ transform:translateX(14px) rotateY(-180deg); filter:brightness(.98) }

.face{
  position:absolute; inset:0; border-radius:12px; overflow:hidden;
  backface-visibility:hidden; -webkit-backface-visibility:hidden;
}
/* 앞면 = 오른쪽 페이지(짝수), PNG가 꽉 차게 */
.face.front{
  background-size:cover; background-position:center;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.08), inset 0 0 0 8px rgba(202,168,106,.35), 0 18px 36px rgba(0,0,0,.25);
}
/* 뒷면 = 왼쪽 페이지(홀수), 뒤집어 보정 */
.face.back{
  transform:rotateY(180deg); 
  background-size:cover; background-position:center;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.08), inset 0 0 0 8px rgba(202,168,106,.35), 0 18px 36px rgba(0,0,0,.25);
}

/* 넘김 그림자 */
.leaf::after{
  content:""; position:absolute; inset:0; pointer-events:none; mix-blend-mode:multiply; opacity:.25;
  background:linear-gradient(90deg, rgba(0,0,0,.35), rgba(0,0,0,0) 30%, rgba(0,0,0,0) 70%, rgba(0,0,0,.3));
}

/* 오른쪽 포스트잇 탭 (장식) */
.tabs{ position:absolute; right:-12px; top:36px; width:0; z-index:6; pointer-events:none }
.tab{ position:relative; width:86px; padding:8px 10px; font-weight:700; font-size:12px; color:#1f1c18;
  border:1px solid rgba(0,0,0,.18); border-radius:4px; box-shadow:0 6px 12px rgba(0,0,0,.18); margin:10px 0;
}
.tab-yellow{ background:var(--tab-yellow); transform:rotate(-2deg) }
.tab-green{ background:var(--tab-green); transform:rotate(1.5deg) translateX(-2px) }
.tab-pink{ background:var(--tab-pink); transform:rotate(-1.2deg) translateX(-1px) }
.tab-blue{ background:var(--tab-blue); transform:rotate(2deg) translateX(-2px) }

/* 네비 핫스팟 (좌/우 반쪽 전체) */
.nav{ position:absolute; top:0; bottom:0; width:50%; background:transparent; border:0; padding:0; cursor:pointer; z-index:7 }
.nav.prev{ left:0 } .nav.next{ right:0 }
.nav:focus-visible{ outline:2px dashed rgba(255,255,255,.4) }
